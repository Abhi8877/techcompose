<div class="card bg-light">
    <div class="card-body mx-auto p-4 ">
      <h1 class="card-title mt-3 text-center">Edit User</h1>
      <form [formGroup]="userForm">
        <div class="row">
          <div class="col-4">
            <div>
              <label for="">Name</label>
            </div>
            <div class="form-group input-group mb-0">
              <div class="input-group-prepend">
                <span class="input-group-text"> <i class="fa fa-user"></i> </span>
              </div>
              <input formControlName="name" class="form-control mb-0" placeholder="Full name" type="text">
  
            </div>
            <div *ngIf="formControl.name.touched || (submitted && formControl.name.errors)"
              class="text-danger">
              <div *ngIf="formControl.name.errors?.required">Name is required.</div>
            </div>
          </div>
          <div class="col-4">
            <div>
              <label for="">Email</label>
            </div>
            <div class="form-group input-group mb-0">
              <div class="input-group-prepend">
                <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
              </div>
              <input formControlName="email" class="form-control" placeholder="Email address" type="email">
  
            </div>
            <div *ngIf="formControl.email.touched || (submitted && formControl.email.errors)" class="text-danger">
              <div *ngIf="formControl.email.errors?.email">Email must be valid.</div>
              <div *ngIf="formControl.email.errors?.required">Email is required.</div>
            </div>
          </div>
          <div class="col-4">
            <div>
              <label for="">Date of birth</label>
            </div>
            <div class="form-group input-group mb-0">
              <div class="input-group-prepend">
                <span class="input-group-text"> <i class="fa fa-calendar"></i> </span>
              </div>
              <input formControlName="dob" class="form-control" placeholder="Date of birth" type="date">
            </div>
            <div *ngIf="formControl.dob.touched || (submitted && formControl.dob.errors)" class="text-danger">
              <div *ngIf="formControl.dob.errors?.required">DOB is required.</div>
            </div>
          </div>
          <div class="col-4">
            <div>
              <label for="">Password</label>
            </div>
            <div class="form-group input-group mb-0">
              <div class="input-group-prepend">
                <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
              </div>
              <input formControlName="password" class="form-control" placeholder="Create password" type="password">
            </div>
            <div *ngIf="formControl.password.touched  || (submitted && formControl.password.errors)" class="text-danger">
              <div *ngIf="formControl.password.errors?.required">New Password is not valid.</div>
  
              <div *ngIf="formControl.password.errors?.pattern">
                <ul>
                  <li>Password should be alphanumeric</li>
                  <li>A letter of the password should be capital</li>
                  <li>Password must contain a special character (@, $, !, &, etc)</li>
                  <li>Password length must be greater than 7 characters</li>
                </ul>
              </div>
            </div>
  
          </div>
          <div class="col-4">
            <div>
              <label for="">Business Name</label>
            </div>
            <div class="form-group input-group mb-0">
              <div class="input-group-prepend">
                <span class="input-group-text"> <i class="fa fa-user"></i> </span>
              </div>
              <input formControlName="business_name" class="form-control mb-0" placeholder="Full name" type="text">
  
            </div>
            <div *ngIf="formControl.business_name.touched || (submitted && formControl.business_name.errors)"
              class="text-danger">
              <div *ngIf="formControl.business_name.errors?.required">Name is required.</div>
            </div>
          </div>
          
        </div>
       
          <div class="col-12">
            <div formArrayName="branch" >
                <h3>Branches</h3>
                <div  *ngFor="let itemrow of formArr.controls; let i=index" [formGroupName]="i" class="row">
                 <div class="col-4">
                  <label for="">Area Name</label>
                  <input type="text" formControlName="area_code" class="form-control mb-0" placeholder="Area name"> 
                  <div *ngIf="itemrow.get('area_code')?.touched || (submitted && itemrow.get('area_code')?.hasError('required'))"
              class="text-danger">
              <div *ngIf="itemrow.get('area_code')?.hasError('required')">Area Name is required.</div>
            </div>
                 </div>
                 <div class="col-4">
                  <label for="">Contact No.</label>
                  <input type="text" formControlName="contact_no" class="form-control mb-0" placeholder="Phone" appPhoneMask> 
                  <div *ngIf="itemrow.get('contact_no')?.touched || (submitted && itemrow.get('contact_no')?.errors)"
              class="text-danger">
              <div *ngIf="itemrow.get('contact_no')?.hasError('required')">Contact No is required.</div>
            </div>
                 </div>
                 <div class="col-4 text-center pt-4">
                    <button class="btn btn-primary m-2" type="button" (click)="addNewRow()" *ngIf="i == formArr.controls.length -1 ">Add Branch</button>
                    <button class="btn btn-danger  m-2" type="button" (click)="deleteRow(i)" *ngIf="i > 0">Delete Branch</button>
                 </div>
                </div>
            

              </div>
          </div>
        <div class="row">
          <div class="col-6 text-center">
            <div class="form-group">
                <button type="submit" class="btn btn-success" (click)="submitForm()"> Edit User </button>
              </div> 
        </div>
        <div class="col-6 text-center">
            <div class="form-group">
                <button  class="btn btn-danger" [routerLink]="['/dashboard']" routerLinkActive="router-link-active" > Back </button>
              </div> 
        </div>
        </div>
      </form>
    </div>
  </div>
  